import { addPublicationJsonLd } from '@starter-kit/utils/seo/addPublicationJsonLd';
import { getAutogeneratedPublicationOG } from '@starter-kit/utils/social/og';
import request from 'graphql-request';
import { GetStaticProps } from 'next';
import Head from 'next/head';
import Link from 'next/link';
import { motion } from 'framer-motion';
import { 
	PublicationFragment,
	PostsByPublicationDocument,
	PostsByPublicationQuery,
	PostsByPublicationQueryVariables,
} from '../generated/graphql';
import { AppProvider } from '../components/contexts/appContext';
import ModernHeader from '../components/modern-header';
import { Footer } from '../components/footer';
import Chatbot from '../components/chatbot';
import { Container } from '../components/container';
import { Badge } from '../components/ui/badge';
import { Button } from '../components/ui/button';
import { 
	Accordion,
	AccordionContent,
	AccordionItem,
	AccordionTrigger,
} from '../components/ui/accordion';
import { 
	BriefcaseIcon, 
	GraduationCapIcon, 
	BracketsIcon, 
	MapPinIcon,
	CalendarIcon,
	ArrowRightIcon,
	StarIcon,
	LightbulbIcon,
	BookOpenIcon
} from 'lucide-react';

const GQL_ENDPOINT = process.env.NEXT_PUBLIC_HASHNODE_GQL_ENDPOINT;

type Props = {
	publication: PublicationFragment;
};

export default function About({ publication }: Props) {
	const skills = {
		'Languages & Scripting': ['JavaScript (ES6+)', 'TypeScript', 'PHP', 'HTML5', 'CSS3', 'Sass/SCSS'],
		'Front-End': ['React', 'Next.js', 'AngularJS', 'Tailwind CSS'],
		'Back-End & APIs': ['Node.js', 'Express', 'Nest.js', 'GraphQL', 'REST', 'JSON'],
		'Testing': ['Playwright', 'Jest'],
		'CI/CD & DevOps': ['GitHub Actions', 'Docker', 'Kubernetes', 'Vercel'],
		'Databases & CMS': ['SQL Server', 'MySQL', 'WordPress (Custom Themes & Plugins)', 'Contentful']
	};

	const experience = [
		{
			title: 'Senior Front-End Developer',
			company: 'IntraWeb Technology',
			period: '2020 - Present',
			location: 'Montville, NJ',
			description: 'Lead front-end for company site and client projects; incubated SynaplyAI.',
			achievements: [
				'Built the IntraWeb Technologies website with Next.js, React, TypeScript, and Tailwind CSS; shipped an accessible, SEO-optimized presence.',
				'Delivered custom WordPress and Shopify builds emphasizing mobile performance and SEO for clients including KAL Design.',
				'Scoped requirements, owned timelines, and served as primary client liaison to ensure quality delivery and satisfaction.',
				'Incubated SynaplyAI (multi-tenant AI content collaboration) with front-end architecture, OpenAI integrations, real-time collab editing, and adaptive AI content generation.'
			]
		},
		{
			title: 'Full-Stack Developer',
			company: 'ColorStreet',
			period: '2024',
			location: 'Totowa, NJ',
			description: 'Contributed to e-commerce platform quality and integrations.',
			achievements: [
				'Implemented automated UI testing with Playwright, improving reliability across releases.',
				'Integrated and validated Nest.js APIs; ensured stable data flow and interface alignment.',
				'Partnered with QA, design, and product to support sprint delivery and UI improvements.'
			]
		},
		{
			title: 'Senior Front-End Developer',
			company: 'Executive Five Star',
			period: '2016 - 2020',
			location: 'Montville, NJ',
			description: 'Owned front-end for the company\'s car service site and online booking.',
			achievements: [
				'Developed and maintained the primary WordPress site with improved usability and mobile responsiveness.',
				'Integrated Limo Anywhere API for real-time reservations and back-office sync.',
				'Streamlined dispatch workflows by connecting booking front-end to internal systems.'
			]
		},
		{
			title: 'Front-End Developer',
			company: 'Robert Half Technology',
			period: '2013 - 2016',
			location: 'Parsippany, NJ',
			description: 'Built enterprise UIs and internal tooling in JavaScript ecosystems.',
			achievements: [
				'Developed UIs for internal financial platforms using JavaScript, jQuery, and Bootstrap to improve reporting workflows.',
				'Built interactive presentation tools for pharmaceutical clients using Veeva CRM and HTML5.',
				'Delivered front-end features aligned with enterprise UX guidelines in Agile cycles.',
				'Led multiple internal WordPress projects and mentored junior developers on front-end best practices.'
			]
		},
		{
			title: 'Web Developer (Contract)',
			company: 'Level-Nine Creative',
			period: '2009 - 2013',
			location: 'Merritt Island, FL',
			description: 'Delivered custom WordPress sites for small businesses and agencies.',
			achievements: [
				'Designed and developed custom websites using WordPress, PHP, JavaScript, and CSS.',
				'Built reusable UI components for responsive, cross-browser performance.',
				'Customized themes/plugins to support marketing workflows and SEO.'
			]
		},
		{
			title: 'Web Development Program Director',
			company: 'Anthem Institute',
			period: '2005 - 2009',
			location: 'Parsippany, NJ',
			description: 'Led curriculum and instruction across multiple campuses.',
			achievements: [
				'Taught HTML, CSS, JavaScript, PHP, and MySQL; built industry-ready skills.',
				'Managed a team of 8 instructors across 4 campuses; ensured curriculum alignment.',
				'Oversaw accreditation compliance; partnered with Pearson VUE for certification programs.'
			]
		}
	];

	const education = [
		{
			degree: 'Web & Graphic Design',
			school: 'The Chubb Institute',
			period: '2004',
			location: 'New Jersey',
			description: 'Diploma in Web & Graphic Design'
		}
	];

	const certifications = [
		{
			name: '15+ Years Experience',
			issuer: 'Web Development',
			year: '2005-2025'
		}
	];

	return (
		<AppProvider publication={publication}>
			<Head>
				<title>About - {publication.displayTitle || publication.title}</title>
				<meta
					name="description"
					content="Learn more about John Schibelli, Senior Front-End Developer specializing in React, Next.js, TypeScript, and AI-driven development."
				/>
				<meta property="twitter:card" content="summary_large_image" />
				<meta property="twitter:title" content={`About - ${publication.displayTitle || publication.title}`} />
				<meta property="twitter:description" content="Learn more about John Schibelli, Senior Front-End Developer." />
				<meta property="twitter:image" content={getAutogeneratedPublicationOG(publication)} />
				<meta property="og:image" content={getAutogeneratedPublicationOG(publication)} />
				<meta property="og:image:width" content="1200" />
				<meta property="og:image:height" content="630" />
				<meta property="og:title" content={`About - ${publication.displayTitle || publication.title}`} />
				<meta property="og:description" content="Learn more about John Schibelli, Senior Front-End Developer." />
				<meta property="og:type" content="website" />
				<meta property="og:url" content={`${publication.url}/about`} />
				<link rel="canonical" href={`${publication.url}/about`} />
				<script
					type="application/ld+json"
					dangerouslySetInnerHTML={{
						__html: JSON.stringify(addPublicationJsonLd(publication)),
					}}
				/>
			</Head>

			<ModernHeader publication={publication} />

			<main className="min-h-screen bg-white dark:bg-stone-950">
				{/* Hero Section */}
				<section 
					className="py-12 md:py-16 relative bg-stone-50 dark:bg-stone-900 overflow-hidden min-h-[400px]"
					style={{
						backgroundImage: 'url(/assets/hero/hero-bg.png)',
						backgroundSize: 'cover',
						backgroundPosition: 'center',
						backgroundRepeat: 'no-repeat'
					}}
				>
					{/* Background Overlay */}
					<div className="absolute inset-0 bg-stone-50/70 dark:bg-stone-900/70 z-0"></div>
					{/* Content Overlay */}
					<div className="relative z-10">
					<Container className="px-4">
						<motion.div
							initial={{ opacity: 0, y: 20 }}
							animate={{ opacity: 1, y: 0 }}
							transition={{ duration: 0.8, ease: "easeOut" }}
							className="max-w-5xl mx-auto"
						>
							<div className="grid grid-cols-1 lg:grid-cols-3 gap-8 lg:gap-10 items-center">
								{/* Profile Image */}
								<div className="lg:col-span-1 flex justify-center">
									<div className="relative">
										<div className="w-48 h-48 md:w-56 md:h-56 lg:w-52 lg:h-52 rounded-full overflow-hidden bg-gradient-to-br from-stone-200 to-stone-300 dark:from-stone-700 dark:to-stone-600">
											<img
												src="/assets/hero/profile.png"
												alt="John Schibelli - Senior Frontend Developer"
												className="w-full h-full object-cover"
											/>
										</div>
										<div className="absolute -bottom-1 -right-1 w-12 h-12 md:w-14 md:h-14 bg-stone-900 dark:bg-stone-100 rounded-full flex items-center justify-center">
											<BracketsIcon className="w-6 h-6 md:w-7 md:h-7 text-white dark:text-stone-900" />
										</div>
									</div>
								</div>

								{/* Hero Content */}
								<div className="lg:col-span-2 text-center lg:text-left">
									<h1 className="text-4xl md:text-5xl lg:text-6xl font-bold text-stone-900 dark:text-stone-100 mb-4">
										John Schibelli
									</h1>
									<p className="text-xl md:text-2xl lg:text-3xl text-stone-600 dark:text-stone-400 mb-4">
										Senior Front-End Developer
									</p>
									<p className="text-base md:text-lg text-stone-600 dark:text-stone-400 mb-6 leading-relaxed">
										Senior Front-End Developer with 15+ years of experience building scalable, high-performance web apps and company websites. 
										Skilled in React, Next.js, TypeScript, and Tailwind CSS with a strong focus on accessibility, SEO, and client success.
									</p>
									
									<div className="flex flex-wrap justify-center lg:justify-start gap-3 md:gap-4 text-sm text-stone-500 dark:text-stone-400 mb-6">
										<div className="flex items-center gap-2">
											<MapPinIcon className="w-4 h-4" />
											<span>Towaco, NJ</span>
										</div>
										<div className="flex items-center gap-2">
											<BriefcaseIcon className="w-4 h-4" />
											<span>15+ Years Experience</span>
										</div>
										<div className="flex items-center gap-2">
											<CalendarIcon className="w-4 h-4" />
											<span>Available for Projects</span>
										</div>
									</div>

									<div className="flex flex-col sm:flex-row gap-3 justify-center lg:justify-start">
										<Button 
											size="lg"
											className="bg-stone-900 dark:bg-stone-100 text-white dark:text-stone-900 hover:bg-stone-800 dark:hover:bg-stone-200"
											asChild
										>
											<Link href="/contact">
												Get In Touch
												<ArrowRightIcon className="ml-2 h-4 w-4" />
											</Link>
										</Button>
										<Button 
											size="lg"
											variant="outline"
											className="border-stone-300 dark:border-stone-600"
											asChild
										>
											<Link href="/work">
												View My Work
											</Link>
										</Button>
									</div>
								</div>
							</div>
						</motion.div>
					</Container>
					</div>
				</section>

				{/* Professional Summary */}
				<section className="py-16 bg-white dark:bg-stone-950">
					<Container className="px-4">
						<motion.div
							initial={{ opacity: 0, y: 20 }}
							whileInView={{ opacity: 1, y: 0 }}
							transition={{ duration: 0.8, ease: "easeOut" }}
							viewport={{ once: true }}
							className="max-w-4xl mx-auto text-center"
						>
							<h2 className="text-3xl md:text-4xl font-bold text-stone-900 dark:text-stone-100 mb-4">
								What I Do
							</h2>
														<p className="text-lg md:text-xl text-stone-600 dark:text-stone-400 leading-relaxed">
								Senior Front-End Developer with 15+ years of experience building scalable, high-performance web apps and company websites. 
								Skilled in React, Next.js, TypeScript, and Tailwind CSS with a strong focus on accessibility, SEO, and client success. 
								Technical lead behind IntraWeb Technologies&apos; digital presence and AI-driven content collaboration tooling (SynaplyAI).
							</p>
						</motion.div>
					</Container>
				</section>

				{/* Resume Accordion Section */}
				<section className="py-20 bg-stone-50 dark:bg-stone-900">
					<Container className="px-4">
						<motion.div
							initial={{ opacity: 0, y: 20 }}
							whileInView={{ opacity: 1, y: 0 }}
							transition={{ duration: 0.8, ease: "easeOut" }}
							viewport={{ once: true }}
							className="max-w-4xl mx-auto"
						>
							<div className="text-center mb-12">
								<h2 className="text-3xl md:text-4xl font-bold text-stone-900 dark:text-stone-100 mb-4">
									Professional Background
								</h2>
								<p className="text-lg text-stone-600 dark:text-stone-400">
									Explore my experience, skills, and qualifications
								</p>
							</div>

							<Accordion type="single" collapsible className="w-full space-y-4">
								{/* Experience */}
								<AccordionItem value="experience" className="bg-white dark:bg-stone-800 rounded-lg shadow-sm border border-stone-200 dark:border-stone-700 transition-all duration-300 hover:shadow-md hover:border-stone-300 dark:hover:border-stone-600">
									<AccordionTrigger className="px-6 py-4 text-left hover:bg-stone-50 dark:hover:bg-stone-700 transition-colors duration-200 rounded-t-lg">
										<div className="flex items-center gap-3">
											<BriefcaseIcon className="w-5 h-5 text-stone-600 dark:text-stone-400 transition-colors duration-200" />
											<span className="text-lg font-semibold">Professional Experience</span>
										</div>
									</AccordionTrigger>
									<AccordionContent className="px-6">
										<div className="space-y-8">
											{experience.map((job, index) => (
												<div key={index} className="border-l-4 border-stone-200 dark:border-stone-600 pl-6">
													<div className="flex flex-col sm:flex-row sm:items-center sm:justify-between mb-2">
														<h3 className="text-xl font-semibold text-stone-900 dark:text-stone-100">
															{job.title}
														</h3>
														<div className="text-sm text-stone-500 dark:text-stone-400 mt-1 sm:mt-0">
															{job.period}
														</div>
													</div>
													<div className="flex items-center gap-2 text-stone-600 dark:text-stone-400 mb-3">
														<span className="font-medium">{job.company}</span>
														<span>•</span>
														<span>{job.location}</span>
													</div>
													<p className="text-stone-600 dark:text-stone-400 mb-4">
														{job.description}
													</p>
													<ul className="space-y-2">
														{job.achievements.map((achievement, idx) => (
															<li key={idx} className="flex items-start gap-2 text-sm text-stone-600 dark:text-stone-400">
																<StarIcon className="w-3 h-3 text-stone-400 dark:text-stone-500 mt-1 flex-shrink-0" />
																{achievement}
															</li>
														))}
													</ul>
												</div>
											))}
										</div>
									</AccordionContent>
								</AccordionItem>

								{/* Skills */}
								<AccordionItem value="skills" className="bg-white dark:bg-stone-800 rounded-lg shadow-sm border border-stone-200 dark:border-stone-700 transition-all duration-300 hover:shadow-md hover:border-stone-300 dark:hover:border-stone-600">
									<AccordionTrigger className="px-6 py-4 text-left hover:bg-stone-50 dark:hover:bg-stone-700 transition-colors duration-200 rounded-t-lg">
										<div className="flex items-center gap-3">
											<LightbulbIcon className="w-5 h-5 text-stone-600 dark:text-stone-400 transition-colors duration-200" />
											<span className="text-lg font-semibold">Skills & Technologies</span>
										</div>
									</AccordionTrigger>
									<AccordionContent className="px-6">
										<div className="grid grid-cols-1 md:grid-cols-2 gap-6">
											{Object.entries(skills).map(([category, skillList]) => (
												<div key={category} className="space-y-3">
													<h4 className="font-semibold text-stone-900 dark:text-stone-100">
														{category}
													</h4>
													<div className="flex flex-wrap gap-2">
														{skillList.map((skill) => (
															<Badge 
																key={skill}
																variant="secondary" 
																className="bg-stone-100 dark:bg-stone-700 text-stone-700 dark:text-stone-300 border border-stone-200 dark:border-stone-600"
															>
																{skill}
															</Badge>
														))}
													</div>
												</div>
											))}
										</div>
									</AccordionContent>
								</AccordionItem>

								{/* Education */}
								<AccordionItem value="education" className="bg-white dark:bg-stone-800 rounded-lg shadow-sm border border-stone-200 dark:border-stone-700 transition-all duration-300 hover:shadow-md hover:border-stone-300 dark:hover:border-stone-600">
									<AccordionTrigger className="px-6 py-4 text-left hover:bg-stone-50 dark:hover:bg-stone-700 transition-colors duration-200 rounded-t-lg">
										<div className="flex items-center gap-3">
											<GraduationCapIcon className="w-5 h-5 text-stone-600 dark:text-stone-400 transition-colors duration-200" />
											<span className="text-lg font-semibold">Education & Certifications</span>
										</div>
									</AccordionTrigger>
									<AccordionContent className="px-6">
										<div className="space-y-6">
											{education.map((edu, index) => (
												<div key={index} className="border-l-4 border-stone-200 dark:border-stone-600 pl-6">
													<div className="flex flex-col sm:flex-row sm:items-center sm:justify-between mb-2">
														<h4 className="text-lg font-semibold text-stone-900 dark:text-stone-100">
															{edu.degree}
														</h4>
														<div className="text-sm text-stone-500 dark:text-stone-400 mt-1 sm:mt-0">
															{edu.period}
														</div>
													</div>
													<div className="flex items-center gap-2 text-stone-600 dark:text-stone-400 mb-2">
														<span>{edu.school}</span>
														<span>•</span>
														<span>{edu.location}</span>
													</div>
													<p className="text-sm text-stone-600 dark:text-stone-400">
														{edu.description}
													</p>
												</div>
											))}
											
											<div className="pt-4 border-t border-stone-200 dark:border-stone-600">
												<h4 className="font-semibold text-stone-900 dark:text-stone-100 mb-3">Certifications</h4>
												<div className="space-y-2">
													{certifications.map((cert, index) => (
														<div key={index} className="flex items-center justify-between">
															<span className="text-stone-600 dark:text-stone-400">{cert.name}</span>
															<span className="text-sm text-stone-500 dark:text-stone-500">{cert.year}</span>
														</div>
													))}
												</div>
											</div>
										</div>
									</AccordionContent>
								</AccordionItem>

								{/* Approach */}
								<AccordionItem value="approach" className="bg-white dark:bg-stone-800 rounded-lg shadow-sm border border-stone-200 dark:border-stone-700 transition-all duration-300 hover:shadow-md hover:border-stone-300 dark:hover:border-stone-600">
									<AccordionTrigger className="px-6 py-4 text-left hover:bg-stone-50 dark:hover:bg-stone-700 transition-colors duration-200 rounded-t-lg">
										<div className="flex items-center gap-3">
											<BookOpenIcon className="w-5 h-5 text-stone-600 dark:text-stone-400 transition-colors duration-200" />
											<span className="text-lg font-semibold">My Approach & Philosophy</span>
										</div>
									</AccordionTrigger>
									<AccordionContent className="px-6">
										<div className="space-y-4">
											<div>
												<h4 className="font-semibold text-stone-900 dark:text-stone-100 mb-2">Development Philosophy</h4>
												<p className="text-stone-600 dark:text-stone-400">
													I believe in writing clean, maintainable code and staying up-to-date with the latest industry best practices. 
													I&apos;m passionate about AI-driven development and finding innovative ways to improve the development workflow.
												</p>
											</div>
											<div>
												<h4 className="font-semibold text-stone-900 dark:text-stone-100 mb-2">Work Style</h4>
												<p className="text-stone-600 dark:text-stone-400">
													I thrive in collaborative environments and believe in the power of clear communication. 
													I&apos;m committed to delivering high-quality solutions that exceed expectations while meeting deadlines.
												</p>
											</div>
											<div>
												<h4 className="font-semibold text-stone-900 dark:text-stone-100 mb-2">Continuous Learning</h4>
												<p className="text-stone-600 dark:text-stone-400">
													When I&apos;m not coding, you&apos;ll find me exploring new technologies, contributing to open source projects, 
													or sharing knowledge with the developer community.
												</p>
											</div>
										</div>
									</AccordionContent>
								</AccordionItem>
							</Accordion>
						</motion.div>
					</Container>
				</section>

				{/* CTA Section */}
				<section className="py-20 bg-white dark:bg-stone-950">
					<Container className="px-4">
						<motion.div
							initial={{ opacity: 0, y: 20 }}
							whileInView={{ opacity: 1, y: 0 }}
							transition={{ duration: 0.8, ease: "easeOut" }}
							viewport={{ once: true }}
							className="max-w-4xl mx-auto text-center"
						>
							<div className="bg-stone-50 dark:bg-stone-800 rounded-lg p-8 shadow-sm border border-stone-200 dark:border-stone-700">
								<h2 className="text-3xl font-bold text-stone-900 dark:text-stone-100 mb-4">
									Let&apos;s Work Together
								</h2>
								<p className="text-lg text-stone-600 dark:text-stone-400 mb-8">
									I&apos;m available for freelance projects and consulting opportunities. Whether you need a complete application 
									built from scratch or help optimizing an existing codebase, I&apos;d love to hear about your project.
								</p>
								<div className="flex flex-col sm:flex-row gap-4 justify-center">
									<Button 
										size="lg"
										className="bg-stone-900 dark:bg-stone-100 text-white dark:text-stone-900 hover:bg-stone-800 dark:hover:bg-stone-200"
										asChild
									>
										<Link href="/contact">
											Start a Project
											<ArrowRightIcon className="ml-2 h-4 w-4" />
										</Link>
									</Button>
									<Button 
										size="lg"
										variant="outline"
										className="border-stone-300 dark:border-stone-600"
										asChild
									>
										<Link href="/work">
											View My Work
										</Link>
									</Button>
								</div>
							</div>
						</motion.div>
					</Container>
				</section>
			</main>

			<Footer />
			
			{/* Chatbot */}
			<Chatbot />
		</AppProvider>
	);
}

export const getStaticProps: GetStaticProps<Props> = async () => {
	if (!GQL_ENDPOINT) {
		throw new Error('NEXT_PUBLIC_HASHNODE_GQL_ENDPOINT is not defined');
	}

	const data = await request<PostsByPublicationQuery, PostsByPublicationQueryVariables>(
		GQL_ENDPOINT,
		PostsByPublicationDocument,
		{
			first: 0,
			host: process.env.NEXT_PUBLIC_HASHNODE_PUBLICATION_HOST,
		},
	);

	const publication = data.publication;
	if (!publication) {
		return {
			notFound: true,
		};
	}

	return {
		props: {
			publication,
		},
		revalidate: 1,
	};
};
